/*! PhotoZoom - jQuery Plugin - 0.1.0 - 2014-03-17 | https://github.com/PizzaBrandon/photozoom
 * Copyright (c) 2014 by Brandon Belvin | Released under the MIT License | http://brandon.mit-license.org */
(function(g,m){var n=function(e){var a=this,l=e.zoomContainer,h=e.image,d,c;g("#photozoomLens").remove();c=g('<div id="photozoomLens" class="photozoomLens"/>').css({position:"absolute",background:"#fff",border:"2px solid #333",opacity:0.5,display:"none",cursor:"pointer"}).appendTo(h);a.resize=function(){var f=l.zoomRatio||0.25,b=l.zoomBoundary;d={width:Math.round(Math.min(h.width(),b.width*f)),height:Math.round(Math.min(h.height(),b.height*f))};c.css(d);return a};g(document).on("photozoom.imageready",
a.resize);a.moveLens=function(a){if(c){var b=a.x;a=a.y;b=b<d.width/2?0:b>h.width()-d.width/2?h.width()-d.width:b-d.width/2;a=a<d.height/2?0:a>h.height()-d.height/2?h.height()-d.height:a-d.height/2;b={left:b,top:a};c.css(b);return b}};e.pos&&a.moveLens(e.pos);a.show=function(){c&&c.show();return a};a.hide=function(){c&&c.hide();return a};a.destroy=function(){c&&c.remove();c=null;return a};a.element=function(){return c}},p=function(e){var a=this,l=e.image,h=e.target;e=e.zoomImage;var d,c,f;g("#photozoomContainer").remove();
d=g('<div id="photozoomContainer" class="photozoomContainer"/>').css({position:"absolute",background:"#fff",overflow:"hidden",display:"none"}).appendTo(document.body);a.resize=function(){var b=g(h),k=g(m),b={left:b.offset().left,top:b.offset().top,right:b.offset().left+b.outerWidth(),bottom:b.offset().top+b.outerHeight()};b.top=Math.max(b.top,k.scrollTop());b.bottom=Math.min(b.bottom,k.scrollTop()+k.height());b.width=b.right-b.left;b.height=b.bottom-b.top;k=a.zoomBoundary=b;d.css({top:k.top,left:k.left,
width:k.width,height:k.height});return a};c=new Image;c.onload=function(){a.zoomRatio=l.width()/c.width;a.resize();g(document).trigger("photozoom.imageready")};c.src=e;f=g('<img id="photozoomImage" class="photozoomImage"/>').attr("src",e).css({position:"absolute"}).appendTo(d);a.moveImage=function(b){f.css({top:-b.top/a.zoomRatio,left:-b.left/a.zoomRatio});return a};a.show=function(){d&&d.show();return a};a.hide=function(){d&&d.hide();return a};a.destroy=function(){f.remove();f=null;d.remove();d=
null;return a}};g.fn.photozoom=function(e){function a(a){if(!c)if(c=a||!0,f.resize().show(),b.resize().show(),a)g(document).on("touchmove.photozoom",h).on("touchend.photozoom",l);else g(document).on("mousemove.photozoom",h),b.element().on("mouseout.photozoom",l)}function l(){c&&(b.hide(),f.hide(),g(document).off("touchmove.photozoom touchend.photozoom mousemove.photozoom"),b.element().off("mouseout.photozoom"),c=!1)}function h(c){var e=c.originalEvent.touches?c.originalEvent.touches[0]:c.originalEvent.changedTouches?
c.originalEvent.changedTouches[0]:null;e?(c.preventDefault(),a("touch"),c=e):a();c={x:c.pageX-d.offset().left,y:c.pageY-d.offset().top};c=b.moveLens(c);f.moveImage(c)}var d=this,c=!1;e=g.extend({clipToBoundaries:!0},e);var f=d.zoomContainer=new p({image:d,target:e.target||"#photozoomWindow",zoomImage:d.data().zoomSrc}),b=d.lens=new n({image:d,zoomContainer:f});d.destroy=function(){b&&(b.destroy(),b=null);f&&(f.destroy(),f=null);d=null;d.off("touchstart.photozoom touchmove.photozoom mousemove.photozoom mouseout.photozoom touchend.photozoom");
return d};d.on("touchstart.photozoom mouseover.photozoom",h);return d}})(jQuery,window);